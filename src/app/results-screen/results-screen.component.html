<app-header
  goToOnClick="menu"
  topText="Верных ответов: {{ getCorrectQuestionCount() }} из {{
    questions().length
  }}"
  bottomText="Тема: {{ question().topic }}"
/>
<main>
  <!-- Move to component -->
  <fieldset>
    @for (q of questions(); track $index) {
      <div class="button-container">
        <label
          [class]="['app-button', setColor(q, $index)]"
          (click)="setQuestion($index)"
        >
          <input
            #input
            type="radio"
            name="option"
            [checked]="isQuestionChecked($index)"
          />
          {{ $index + 1 }}
        </label>
      </div>
    }
  </fieldset>

  @if (question()) {
    @let q = question();

    <header>
      <h2>Вопрос номер {{ index() + 1 }}</h2>
    </header>

    <p>{{ q.text }}</p>

    @if (q.code) {
      <app-code [code]="q.code" />
    }

    <h4>Правильный ответ:</h4>
    <p>{{ correctAnswerText() }}</p>

    <h4>Ваш ответ:</h4>
    <p>
      {{ userAnswerText() }}
    </p>
    @if (q.answer.explanation) {
      <h4>Объяснение:</h4>
      <p>{{ q.answer.explanation }}</p>
    }

    @if (isAdmin()) {
      <h4>Вопрос верифицирован:</h4>
      <p>{{ q.meta?.reviewed ? "Да" : "Нет" }}</p>
      <button class="app-button gray" (click)="goToEditQuestionScreen()">
        {{ "Редактировать вопрос" | uppercase }}
      </button>
    }
  }
</main>
