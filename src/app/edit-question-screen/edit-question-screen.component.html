<app-header goToOnClick="back" topText="Редактировать вопрос" />
<main>
  @if (questionForm) {
    <form [formGroup]="questionForm" (ngSubmit)="onSubmit()">
      <label for="topic"> Тема: </label>
      <input id="topic" type="text" formControlName="topic" />

      <label for="question-text"> Вопрос: </label>
      <textarea
        id="question-text"
        formControlName="text"
        appTextareaAutoresize
      ></textarea>

      <label for="options"> Варианты ответов: </label>
      <div formArrayName="options" id="options">
        <!-- TODO: add the Angular bug into questions: https://github.com/angular/angular/issues/21682 -->
        @for (option of options.controls; track option.value) {
          <div class="option">
            <input type="radio" name="temp" title="Выбери верный вариант" />
            <textarea
              type="text"
              [formControlName]="$index"
              appTextareaAutoresize
            ></textarea>
            <button
              class="app-button yellow"
              type="button"
              (click)="removeOption($index)"
            >
              {{ "Удалить" | uppercase }}
            </button>
          </div>
        }
        <button class="app-button yellow" type="button" (click)="addOption()">
          {{ "Добавить опцию" | uppercase }}
        </button>
      </div>

      <div formGroupName="answer">
        <label for="correct-answer"> Ответ: </label>
        <input id="correct-answer" type="text" formControlName="index" />
        <label for="explanation"> Объяснение: </label>
        <textarea
          id="explanation"
          type="text"
          formControlName="explanation"
          appTextareaAutoresize
        ></textarea>
      </div>
      <button class="app-button yellow" type="submit">
        {{ "Сохранить" | uppercase }}
      </button>
    </form>
  }
</main>
