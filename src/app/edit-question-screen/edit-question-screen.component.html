<app-header goToOnClick="back" topText="Редактировать вопрос" />
<main>
  @if (questionForm) {
    <form [formGroup]="questionForm" (ngSubmit)="onSubmit()">
      <label for="topic"> Тема: </label>
      <input id="topic" type="text" formControlName="topic" />

      <label for="subtopic"> Подтема: </label>
      <input id="subtopic" type="text" formControlName="subtopic" />

      <label for="question-text"> Вопрос: </label>
      <textarea
        id="question-text"
        formControlName="text"
        appTextareaAutoresize
      ></textarea>

      <label for="explanation"> Объяснение: </label>
      <textarea
        id="explanation"
        formControlName="explanation"
        appTextareaAutoresize
      ></textarea>

      <label for="options"> Варианты ответов: </label>
      <div id="options" formArrayName="options">
        @for (option of options.controls; track option.value) {
          <div class="option-container" [formGroupName]="$index">
            <input
              type="checkbox"
              [value]="true"
              title="Выбери верный вариант"
              name="isCorrect"
              formControlName="isCorrect"
            />
            <textarea
              type="text"
              formControlName="text"
              appTextareaAutoresize
            ></textarea>
            <button
              class="app-button yellow"
              type="button"
              (click)="removeOption($index)"
              [disabled]="isRemoveButtonDisabled($index)"
            >
              <img src="trash-basket.svg" />
            </button>
          </div>
        }
      </div>

      <label for="difficult"> Сложность: </label>
      <div id="difficult">
        @for (
          option of [
            { value: "easy", text: "Легко" },
            { value: "medium", text: "Нормально" },
            { value: "hard", text: "Сложно" },
          ];
          track option.value
        ) {
          <label class="app-button gray">
            <input
              type="radio"
              [value]="option.value"
              formControlName="difficult"
            />
            <span>{{ option.text }}</span>
          </label>
        }
      </div>

      <label for="reviewed"> Проверено: </label>
      <div id="reviewed">
        @for (
          option of [
            { value: true, text: "Да" },
            { value: false, text: "Нет" },
          ];
          track option.value
        ) {
          <label class="app-button gray">
            <input
              type="radio"
              [value]="option.value"
              formControlName="reviewed"
            />
            <span>{{ option.text }}</span>
          </label>
        }
      </div>
      <button
        class="app-button yellow"
        [disabled]="isSaveButtonDisabled()"
        type="submit"
      >
        {{ "Сохранить" | uppercase }}
      </button>
    </form>
  }
</main>
