@if (topicsLoadingState$ | async; as state) {
  @switch (state.type) {
    @case ("loading") {
      <app-loading-screen />
    }
    @case ("error") {
      <!-- TODO: add error handling -->
      <!-- Error: {{ state.error.message }} -->
    }
    @case ("loaded") {
      @let topicsData = state.data;

      <main>
        <h2>{{ "Тема:" | uppercase }}</h2>

        <div class="select-topic-container">
          <app-options
            name="select-topic"
            [options]="getTopicOptions(topicsData)"
            [default]="quizService.getTopic()"
            (optionChange)="quizService.setTopic($event)"
          />
        </div>

        @if (quizService.getTopic()) {
          <h2>{{ "Количество вопросов:" | uppercase }}</h2>
          <app-options
            name="select-count"
            [options]="getCountOptions(topicsData)"
            [default]="quizService.getCount()"
            (optionChange)="quizService.setCount($event)"
          />
        }

        <button
          class="app-button yellow start"
          (click)="goTo('quizScreen')"
          [disabled]="isStartButtonDisabled()"
        >
          {{ "Начать тест" | uppercase }}
        </button>
      </main>

      <footer>
        @if (isAdmin$ | async) {
          <button class="app-button gray" (click)="goTo('adminScreen')">
            {{ "Редактировать вопросы" | uppercase }}
          </button>
        }
        <button class="app-button gray" (click)="goTo('settingsScreen')">
          {{ "Настройки" | uppercase }}
        </button>
      </footer>
    }
  }
}
